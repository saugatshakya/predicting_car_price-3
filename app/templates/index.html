<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Car Price Prediction</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        background-color: #f4f4f4;
      }

      .navbar {
        background-color: #333;
        padding: 1rem 0;
      }

      .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
      }

      .logo {
        color: white;
        font-size: 1.5rem;
        font-weight: bold;
      }

      .nav-links {
        display: flex;
        list-style: none;
        gap: 30px;
      }

      .nav-links a {
        color: white;
        text-decoration: none;
        padding: 10px 15px;
        border-radius: 5px;
        transition: background-color 0.3s;
      }

      .nav-links a:hover {
        background-color: #555;
      }

      .nav-links a.active {
        background-color: #007bff;
      }

      .container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 20px;
      }

      .page {
        display: none;
        background: white;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .page.active {
        display: block;
      }

      h1 {
        color: #333;
        margin-bottom: 1rem;
      }

      h2 {
        color: #666;
        margin-bottom: 1.5rem;
      }

      .info-box {
        background-color: #e7f3ff;
        border-left: 4px solid #007bff;
        padding: 1rem;
        margin-bottom: 2rem;
      }

      .form-group {
        margin-bottom: 1rem;
      }

      label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
        color: #555;
      }

      input,
      select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #007bff;
      }

      button {
        background-color: #007bff;
        color: white;
        padding: 0.75rem 2rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.3s;
      }

      button:hover {
        background-color: #0056b3;
      }

      button:disabled {
        background-color: #6c757d;
        cursor: not-allowed;
      }

      .output-box {
        margin-top: 2rem;
        padding: 1rem;
        border: 2px solid #ddd;
        border-radius: 5px;
        background-color: #f8f9fa;
        min-height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .price-result {
        font-size: 1.5rem;
        font-weight: bold;
        color: #28a745;
      }

      .error {
        color: #dc3545;
      }

      .loading {
        color: #007bff;
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-container">
        <div class="logo">Car Price Predictor</div>
        <ul class="nav-links">
          <li>
            <a href="#" onclick="showPage('home')" class="active">Home</a>
          </li>
          <li><a href="#" onclick="showPage('old')">Old Model</a></li>
          <li><a href="#" onclick="showPage('new')">New Model</a></li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <!-- Home Page -->
      <div id="home" class="page active">
        <h1>Welcome to Car Price Prediction</h1>
        <p>
          This application helps you predict car prices using machine learning
          models. We have two models available:
        </p>

        <h2>Available Models:</h2>
        <div style="margin-bottom: 1rem">
          <strong>Old Model:</strong> Our original car price prediction model
        </div>
        <div>
          <strong>New Model:</strong> Our improved and newly developed
          prediction model
        </div>

        <p style="margin-top: 2rem">
          Use the navigation menu above to select which model you'd like to use
          for prediction.
        </p>
      </div>

      <!-- Old Model Page -->
      <div id="old" class="page">
        <h1>Old Model - Car Price Prediction</h1>
        <p>
          Use our original model to predict car prices based on vehicle
          specifications.
        </p>

        <form id="oldForm">
          <div class="form-group">
            <label for="old_year">Year:</label>
            <input
              type="number"
              id="old_year"
              name="year"
              max="2025"
              required
            />
          </div>

          <div class="form-group">
            <label for="old_km_driven">KM Driven:</label>
            <input
              type="number"
              id="old_km_driven"
              name="km_driven"
              required
            />
          </div>

          <div class="form-group">
            <label for="old_engine">Engine (CC):</label>
            <input type="number" id="old_engine" name="engine" required />
          </div>

          <div class="form-group">
            <label for="old_max_power">Max Power (HP):</label>
            <input type="number" id="old_max_power" name="max_power" required />
          </div>

          <div class="form-group">
            <label for="old_brand">Brand:</label>
            <select id="old_brand" name="brand" required>
              <option value="">Select Brand</option>
              <option value="Maruti">Maruti</option>
              <option value="Hyundai">Hyundai</option>
              <option value="Honda">Honda</option>
              <option value="Toyota">Toyota</option>
              <option value="Tata">Tata</option>
              <option value="Mahindra">Mahindra</option>
              <option value="Ford">Ford</option>
              <option value="Chevrolet">Chevrolet</option>
              <option value="Renault">Renault</option>
              <option value="Nissan">Nissan</option>
            </select>
          </div>

          <div class="form-group">
            <label for="old_mileage">Mileage (kmpl):</label>
            <input
              type="number"
              id="old_mileage"
              name="mileage"
              required
            />
          </div>

          <button type="submit">Predict Price</button>
        </form>

        <div id="oldOutput" class="output-box">
          Click submit to see prediction results
        </div>
      </div>

      <!-- New Model Page -->
      <div id="new" class="page">
        <h1>New Model - Enhanced Car Price Prediction</h1>

        <div class="info-box">
          <h3>About the New Model:</h3>
          <p>
            Our newly developed model offers improved accuracy and better
            handling of various car features. This enhanced model uses advanced
            algorithms to provide more reliable price predictions compared to
            the old model.
          </p>

          <p><strong>Key Improvements:</strong></p>
          <ul style="margin-top: 0.5rem; margin-left: 1.5rem">
            <li>Better accuracy in price predictions</li>
            <li>Improved handling of unseen data</li>
            <li>Enhanced feature processing</li>
            <li>More robust error handling</li>
          </ul>
        </div>

        <form id="newForm">
          <div class="form-group">
            <label for="new_year">Year:</label>
            <input
              type="number"
              id="new_year"
              name="year"
              max="2025"
              required
            />
          </div>

          <div class="form-group">
            <label for="new_km_driven">KM Driven:</label>
            <input
              type="number"
              id="new_km_driven"
              name="km_driven"
              required
            />
          </div>

          <div class="form-group">
            <label for="new_engine">Engine (CC):</label>
            <input
              type="number"
              id="new_engine"
              name="engine"
              required
            />
          </div>

          <div class="form-group">
            <label for="new_max_power">Max Power (HP):</label>
            <input
              type="number"
              id="new_max_power"
              name="max_power"
              required
            />
          </div>

          <div class="form-group">
            <label for="new_brand">Brand:</label>
            <select id="new_brand" name="brand" required>
              <option value="">Select Brand</option>
              <option value="Maruti">Maruti</option>
              <option value="Hyundai">Hyundai</option>
              <option value="Honda">Honda</option>
              <option value="Toyota">Toyota</option>
              <option value="Tata">Tata</option>
              <option value="Mahindra">Mahindra</option>
              <option value="Ford">Ford</option>
              <option value="Chevrolet">Chevrolet</option>
              <option value="Renault">Renault</option>
              <option value="Nissan">Nissan</option>
            </select>
          </div>

          <div class="form-group">
            <label for="new_mileage">Mileage (kmpl):</label>
            <input
              type="number"
              id="new_mileage"
              name="mileage"
              required
            />
          </div>

          <button type="submit">Predict Price</button>
        </form>

        <div id="newOutput" class="output-box">
          Click submit to see prediction results
        </div>
      </div>
    </div>

    <script>
      function showPage(pageId) {
        // Hide all pages
        document.querySelectorAll(".page").forEach((page) => {
          page.classList.remove("active");
        });

        // Remove active class from all nav links
        document.querySelectorAll(".nav-links a").forEach((link) => {
          link.classList.remove("active");
        });

        // Show selected page
        document.getElementById(pageId).classList.add("active");

        // Add active class to clicked nav link
        event.target.classList.add("active");
      }

      // Handle Old Model Form Submission
      document
        .getElementById("oldForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const outputDiv = document.getElementById("oldOutput");
          const submitButton = this.querySelector('button[type="submit"]');

          // Disable button and show loading
          submitButton.disabled = true;
          outputDiv.innerHTML =
            '<div class="loading">Predicting... Please wait</div>';

          // Collect form data
          const formData = new FormData(this);
          const data = {};
          for (let [key, value] of formData.entries()) {
            data[key] = key === "brand" ? value : parseFloat(value);
          }

          try {
            const response = await fetch("/predict", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            });

            const result = await response.json();

            if (response.ok) {
              outputDiv.innerHTML = `<div class="price-result">Predicted Price: ${result.price.toLocaleString()}</div>`;
            } else {
              outputDiv.innerHTML = `<div class="error">Error: ${result.error}</div>`;
            }
          } catch (error) {
            outputDiv.innerHTML = `<div class="error">Network error: ${error.message}</div>`;
          } finally {
            submitButton.disabled = false;
          }
        });

      // Handle New Model Form Submission
      document
        .getElementById("newForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const outputDiv = document.getElementById("newOutput");
          const submitButton = this.querySelector('button[type="submit"]');

          // Disable button and show loading
          submitButton.disabled = true;
          outputDiv.innerHTML =
            '<div class="loading">Predicting... Please wait</div>';

          // Collect form data
          const formData = new FormData(this);
          const data = {};
          for (let [key, value] of formData.entries()) {
            data[key] = key === "brand" ? value : parseFloat(value);
          }

          try {
            const response = await fetch("/predict_v2", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            });

            const result = await response.json();

            if (response.ok) {
              outputDiv.innerHTML = `<div class="price-result">Predicted Price: ${result.price.toLocaleString()}</div>`;
            } else {
              outputDiv.innerHTML = `<div class="error">Error: ${result.error}</div>`;
            }
          } catch (error) {
            outputDiv.innerHTML = `<div class="error">Network error: ${error.message}</div>`;
          } finally {
            submitButton.disabled = false;
          }
        });
    </script>
  </body>
</html>
